<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>i. and i: Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="mbx.htm">&gt;&gt;</a>&nbsp;
<a href="ccapdot.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">i. </font>
<font size=+3>and</font><font size=+3 face="Courier New"> i: </font>
<font size=+3>Improved</font></b>
</td><td align=right>
initial writing: 2000-00-00<br>last updated: 2004-10-26
</td></tr></table>
<br>

The dyads<tt> i. </tt>and<tt> i: </tt>have 
been changed to improve their performance on arguments
that have many columns that are identical in value
(for example, aaaaba aaaaxa aaaa2a).
Also,<tt> i. </tt>and<tt> i: </tt> previously
had a bug in the handling of floating point arguments
that differ only in the last few significant bits,
resulting in very poor performance.  This bug has
now been fixed.<br><br>

Timing comparisons are as follows:<br><br>

<pre>   timer=: 6!:2

   c=: a.{~ ?3e4 36$#a.       NB. random literal
   d=: (?#~#c){c

   s=: a.{~?3e4 2$#a.
   t=: ($c)$'x'
   c1=: s (&lt;a:;10 11)}t       NB. little-varying literal; same amount of data as c
   d1=: (?#~#c1){c1           NB. only cols 10,11 can differ in each row

   i=: (?3e4$65536),&quot;0 1 i.8  NB. little-varying integers; same amount of data as c
   j=: (?#~#i){i              NB. only a few bytes can differ in each row

   x=: 1.12+ i. n             NB. FP with many different bits
   y=: 1e12+ i. n             NB. FP with only trailing bits different
</pre>

<table>
<tr>
<td><b>&nbsp; &nbsp;Type</b></td>
<td><b>&nbsp; &nbsp;J 4.05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></td>
<td><b>&nbsp; &nbsp;J 4.04</b></td>
</tr>

<tr>
<td>random literal;<tt> c i. d</tt></td>
<td>0.0736780</td>
<td>0.0689725</td>
</tr>

<tr>
<td>little-varying literal;<tt> c1 i. d1</tt></td>
<td>0.0750378</td>
<td>1.64165</td>
</tr>

<tr>
<td>little-varying integer;<tt> i i. j</tt></td>
<td>0.0881493</td>
<td>159.712</td>
</tr>

<tr>
<td>&nbsp;</td>
</tr>

<tr>
<td>FP with many different bits;<tt> i.~x</tt></td>
</tr>

<tr>
<td>1000</td>
<td>0.00097554</td>
<td>0.00072160</td>
</tr>

<tr>
<td>2000</td>
<td>0.00176000</td>
<td>0.00120015</td>
</tr>

<tr>
<td>4000</td>
<td>0.00370522</td>
<td>0.00239025</td>
</tr>

<tr>
<td>8000</td>
<td>0.00740289</td>
<td>0.00485425</td>
</tr>

<tr>
<td>16000</td>
<td>0.01379169</td>
<td>0.01139474</td>
</tr>

<tr>
<td>FP with only trailing bits different;<tt> i.~y</tt></td>
</tr>

<tr>
<td>1000</td>
<td>0.00084145</td>
<td>0.10794414</td>
</tr>

<tr>
<td>2000</td>
<td>0.00252267</td>
<td>0.45633776</td>
</tr>

<tr>
<td>4000</td>
<td>0.00383512</td>
<td>1.87803872</td>
</tr>

<tr>
<td>8000</td>
<td>0.00697798</td>
<td>7.62392158</td>
</tr>

<tr>
<td>16000</td>
<td>0.01491390</td>
<td>30.47773014</td>
</tr>
</table>

<br><br>
<!--bottom jump start--><hr><a href="mbx.htm">&gt;&gt;</a>&nbsp;
<a href="ccapdot.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
