<html>
<head><link rel=stylesheet href="../jdoc.css" type="text/css">
<title>f/ .g Improved</title>
<link href="../jdoc.css" rel=stylesheet>
</head>

<body><!--top jump start--><a href="cut504.htm">&gt;&gt;</a>&nbsp;
<a href="powopb.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<hr><!--top jump end-->

<br>
<table width=100%><tr><td align=left valign=top>
<b><font size=+3 face="Courier New">f/ .g </font>
<font size=+3>Improved</font></b>
</td><td align=right>
initial writing: 2004-09-01<br>last updated: 2005-03-18
</td></tr></table>
<br>

<p>The following <i>inner products</i> are now faster (and also leaner for the Boolean inner products).</p>
<table>
<tr><td><tt>+/ .*</tt></td><td>&nbsp;&nbsp;</td><td>&nbsp;</td><td>&nbsp;&nbsp;</td>
 <td>Boolean, integer, floating point, complex</td></tr>
<tr><td><tt>+./ .*. </tt></td><td>&nbsp;</td><td><tt> +./ .*</tt></td><td>&nbsp;</td>
 <td>Boolean; faster and leaner</td></tr>
<tr><td><tt>~:/ .*. </tt></td><td>&nbsp;</td><td><tt> ~:/ .*</tt></td><td>&nbsp;</td>
 <td>Boolean; faster and leaner</td></tr>
</table>

<p>The improvement is minor with small arrays but is substantial with
larger arrays, and is larger for CPUs with a large on-die cache.
The following benchmarks demonstrate the improvement.</p>


<table>
<tr>
<td>&nbsp;</td><td>&nbsp;</td>
<td align=center><b>m</b></td><td>&nbsp;</td>
<td align=center><b>p</b></td><td>&nbsp;</td>
<td align=center><b>n</b></td><td>&nbsp;</td>
<td align=center><b>Type</b></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align=center><b>J5.04</b></td><td>&nbsp;</td>
<td align=center><b>J5.03</b></td><td>&nbsp;</td>
<td align=center><b>Ratio</b></td><td>&nbsp;</td>
</tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>+./ .*.</tt></td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>100</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.01229828</td><td>&nbsp;</td><td align=right>0.06245972<td>&nbsp;</td><td align=right>  5.08</td></tr>
<tr><td>&nbsp;          </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>200</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.02436215</td><td>&nbsp;</td><td align=right>0.12242737<td>&nbsp;</td><td align=right>  5.03</td></tr>
<tr><td>&nbsp;          </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>400</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.04842964</td><td>&nbsp;</td><td align=right>0.48997266<td>&nbsp;</td><td align=right> 10.12</td></tr>
<tr><td>&nbsp;          </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.10693234</td><td>&nbsp;</td><td align=right>1.19284602<td>&nbsp;</td><td align=right> 11.16</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>+/ .*</tt></td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>100</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.01522230</td><td>&nbsp;</td><td align=right>0.04825642</td><td>&nbsp;</td><td align=right>3.17</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>200</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.02714897</td><td>&nbsp;</td><td align=right>0.09307329</td><td>&nbsp;</td><td align=right>3.43</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>400</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.05281650</td><td>&nbsp;</td><td align=right>0.18381550</td><td>&nbsp;</td><td align=right>3.48</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>Boolean</td><td>&nbsp;</td><td>0.11380058</td><td>&nbsp;</td><td align=right>0.36863960</td><td>&nbsp;</td><td align=right>3.24</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>+/ .*</tt></td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>100</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>integer</td><td>&nbsp;</td><td align=right>0.18923574</td><td>&nbsp;</td><td align=right>0.16371892</td><td>&nbsp;</td><td align=right>0.87</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>200</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>integer</td><td>&nbsp;</td><td align=right>0.38702915</td><td>&nbsp;</td><td align=right>0.42442516</td><td>&nbsp;</td><td align=right>1.10</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>400</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>integer</td><td>&nbsp;</td><td align=right>0.75412938</td><td>&nbsp;</td><td align=right>0.86987551</td><td>&nbsp;</td><td align=right>1.15</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>integer</td><td>&nbsp;</td><td align=right>1.49535773</td><td>&nbsp;</td><td align=right>4.33534356</td><td>&nbsp;</td><td align=right>2.90</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>+/ .*</tt></td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>100</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>real</td><td>&nbsp;</td><td>0.22889839</td><td>&nbsp;</td><td align=right>  0.74948352</td><td>&nbsp;</td><td align=right> 3.27</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>200</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>real</td><td>&nbsp;</td><td>0.44844771</td><td>&nbsp;</td><td align=right>  1.53543945</td><td>&nbsp;</td><td align=right> 3.42</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>400</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>real</td><td>&nbsp;</td><td>0.89166200</td><td>&nbsp;</td><td align=right>  4.73978968</td><td>&nbsp;</td><td align=right> 5.32</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>real</td><td>&nbsp;</td><td>1.77981982</td><td>&nbsp;</td><td align=right> 10.93269003</td><td>&nbsp;</td><td align=right> 6.14</td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td><tt>+/ .*</tt></td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>100</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>complex</td><td>&nbsp;</td><td>0.65384512</td><td>&nbsp;</td><td align=right> 0.98544341</td><td>&nbsp;</td><td align=right>1.51</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>200</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>complex</td><td>&nbsp;</td><td>1.31073778</td><td>&nbsp;</td><td align=right> 2.74356425</td><td>&nbsp;</td><td align=right>2.09</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>400</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>complex</td><td>&nbsp;</td><td>2.61397222</td><td>&nbsp;</td><td align=right> 5.95522645</td><td>&nbsp;</td><td align=right>2.28</td></tr>
<tr><td>&nbsp;        </td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>800</td><td>&nbsp;</td><td>complex</td><td>&nbsp;</td><td>5.21419328</td><td>&nbsp;</td><td align=right>12.33558427</td><td>&nbsp;</td><td align=right>2.37</td></tr>
</table>

<br><br>

<!--bottom jump start--><hr><a href="cut504.htm">&gt;&gt;</a>&nbsp;
<a href="powopb.htm">&lt;&lt;</a>&nbsp;
<a href="../user/contents.htm">Usr</a>&nbsp;
<a href="../primer/contents.htm">Pri</a>&nbsp;
<a href="../jforc/contents.htm">JfC</a>&nbsp;
<a href="../learning/contents.htm">LJ</a>&nbsp;
<a href="../phrases/contents.htm">Phr</a>&nbsp;
<a href="../dictionary/contents.htm">Dic</a>&nbsp;
<a href="../release/contents.htm">Rel</a>&nbsp;
<a href="../dictionary/vocabul.htm">Voc</a>&nbsp;
<a href="../dictionary/xmain.htm">!:</a>&nbsp;
<a href="../index.htm">Help</a>&nbsp;
Release<!--bottom jump end--></body>
</html>
